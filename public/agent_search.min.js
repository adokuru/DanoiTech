$(function() {
	function t() {
		$(".btn_filter_by_more")
			.parent()
			.removeClass("open"),
			$("body").removeClass("overflow-hidden"),
			$(".property-menu-bar").removeClass("sticky");
	}
	$(window).scroll(function() {
		$(this).scrollTop() > 165
			? $(".property-menu-bar").addClass("headerstuck")
			: $(".property-menu-bar").removeClass("headerstuck");
	}),
		$("#frm_search_result_page_search").on("submit", function() {
			var t = $(this),
				e = [];
			$.each(
				$("input[name='chk_filter_property_type[]']:checked"),
				function() {
					e.push($(this).val());
				}
			);
			var i = $(".hid_search_page").val(),
				r = $(".sort_items_by").val(),
				_ = {};
			t.find($(".search_item")).each(function() {
				var t = $(this);
				if (t.val()) {
					var e = t.attr("name");
					_[e] = t.val();
				}
			}),
				(_.propTypeIn = e);
			var n = {
				filters: _,
				sortBy: r,
				type: $(".hid_search_type").val(),
				page: i
			};
			return (
				$.ajax({
					url: t.attr("action"),
					type: "POST",
					data: JSON.stringify(n),
					contentType: "application/json; charset=utf-8",
					async: !0,
					beforeSend: function() {
						$.loading();
					},
					success: function(t, e, i) {
						$.loaded(), $(".agent_search_result_container").html(t);
					}
				}),
				!1
			);
		}),
		$(document).on("click", ".min_price_option_group a", function(t) {
			t.stopPropagation(),
				$(".txt_filter_min_price").val($(this).data("val")),
				$(".min_price_option_group").css("visibility", "hidden"),
				$(".max_price_option_group").css("visibility", "visible");
			var e = $(".txt_filter_min_price").val(),
				i = $(".txt_filter_max_price").val();
			$(".btn_filter_by_price .btntext").text(getPriceButtonText(e, i)),
				$(".txt_filter_max_price").focus();
		}),
		$(document).on("click", ".max_price_option_group a", function(t) {
			$(".txt_filter_max_price").val($(this).data("val"));
			var e = $(".txt_filter_min_price").val(),
				i = $(".txt_filter_max_price").val();
			$(".btn_filter_by_price .btntext").text(getPriceButtonText(e, i));
		}),
		$(".txt_filter_min_price").on("focus", function() {
			$(".min_price_option_group").css("visibility", "visible"),
				$(".max_price_option_group").css("visibility", "hidden");
		}),
		$(".txt_filter_max_price").on("focus", function() {
			$(".min_price_option_group").css("visibility", "hidden"),
				$(".max_price_option_group").css("visibility", "visible");
		}),
		$(".any-price-menu").on("hide.bs.dropdown", function() {
			var t = $(".txt_filter_min_price").val(),
				e = $(".txt_filter_max_price").val();
			$(".min_price_option_group").css("visibility", "hidden"),
				$(".max_price_option_group").css("visibility", "hidden"),
				$(".btn_filter_by_price .btntext").text(
					getPriceButtonText(t, e)
				),
				$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit();
		}),
		$(".any-price-menu").on("show.bs.dropdown", function() {
			$(".min_price_option_group").css("visibility", "visible"),
				$(".txt_filter_min_price").focus();
		}),
		$(".filter_agent_by_rating").on("click", "a", function() {
			$(".txt_filter_agent_rating").val($(this).data("value")),
				$(".btn_filter_by_rating .btntext").text(
					$(this).data("value") +
						($(this).data("value") ? " Star" : "Rating")
				),
				$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit();
		}),
		$(".filter_agent_by_recommendation").on("click", "a", function() {
			$(".txt_filter_agent_recommendation").val($(this).data("value")),
				$(".btn_filter_by_recommendation .btntext").text(
					$(this).data("value") +
						($(this).data("value") ? "+ Recomm" : "Recommendation")
				),
				$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit();
		}),
		$(".filter_agent_by_worked_with").on("click", "a", function() {
			$(".txt_filter_agent_worked_with").val($(this).data("value")),
				$(".btn_filter_by_worked_with .btntext").text(
					$(this).data("value") ? $(this).text() : "Worked With"
				),
				$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit();
		}),
		$(document).on("change", ".chk_filter_property_type", function(t) {
			var e;
			(e =
				1 ==
				$("input[name='chk_filter_property_type[]']:checked").length
					? $(
							"input[name='chk_filter_property_type[]']:checked"
					  ).data("text_val")
					: 0 ==
					  $("input[name='chk_filter_property_type[]']:checked")
							.length
					? "Property type"
					: "Property type (" +
					  $("input[name='chk_filter_property_type[]']:checked")
							.length +
					  ")"),
				$(".btn_filter_by_prop_type .btntext").text(e.trimToLength(20));
		}),
		$(".property_type_dropdown").on("hide.bs.dropdown", function() {
			$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit();
		}),
		$(document).on("change", ".sort_items_by", function() {
			$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit();
		}),
		$(".btn_filter_by_more").on("click", function(t) {
			$(".btn_filter_by_more")
				.parent()
				.toggleClass("open"),
				$("body").toggleClass("overflow-hidden"),
				$(".property-menu-bar").toggleClass("sticky");
		}),
		$("body").on("click", function(e) {
			$(".btn_filter_by_more").is(e.target) ||
				0 !== $(".btn_filter_by_more").has(e.target).length ||
				0 !== $(".open").has(e.target).length ||
				$(".select2-search__field").is(e.target) ||
				t();
		}),
		$(".btn_filter_by_more_options").on("click", function() {
			$(".hid_search_page").val("0"),
				$(".frm_search_result_page_search").submit(),
				t();
		}),
		$(".btn_filter_by_more_options_cancel").on("click", function() {
			t();
		}),
		$(".btn_filter_by_more_options_reset").on("click", function() {
			$(".property_more_filters")
				.find(".search_item")
				.each(function() {
					$(this)
						.val("")
						.trigger("change");
				});
		}),
		$(document).on("click", ".find_agent_pagination a", function(t) {
			var e = $(this);
			return (
				$(".hid_search_page").val(e.data("page")),
				$(".frm_search_result_page_search").submit(),
				!1
			);
		});
});
